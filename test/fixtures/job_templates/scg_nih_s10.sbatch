#!/bin/bash
# TEMPLATE_ID=slurm/scg/nih_s10.sbatch
# Generated by Mycelia JobSpec template renderer.
# Site profile: scg
#SBATCH --job-name=fixture-scg
#SBATCH --mail-user=user@example.org
#SBATCH --mail-type=END,FAIL
#SBATCH --error=/Users/cameronprybol/workspace/slurmlogs/%j.%x.err
#SBATCH --output=/Users/cameronprybol/workspace/slurmlogs/%j.%x.out
#SBATCH --partition=nih_s10
#SBATCH --account=PI_EXAMPLE
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --time=24:00:00
#SBATCH --cpus-per-task=12
#SBATCH --mem=96G

set -euo pipefail

# No module or environment setup requested

JOB_CMD='julia --project=. workflow.jl'
bash -lc "$JOB_CMD"

# Monitoring hints:
#   squeue -u $USER
#   scontrol show job <jobid>
#   sacct -j <jobid> --format=JobID,JobName,AllocCPUS,Elapsed,State,ExitCode,MaxRSS
#   sstat -j <jobid>.batch --format=JobID,MaxRSS,MaxVMSize,AvgCPU
#   seff <jobid>  # if seff is available
#   nvidia-smi
#   nvidia-smi topo -m  # optional topology check
